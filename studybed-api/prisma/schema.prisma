generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("MARKDOWN_DB_PATH")
}

model file_tags {
  tag   String
  file  String
  files files  @relation(fields: [file], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tags  tags   @relation(fields: [tag], references: [name], onDelete: Cascade, onUpdate: NoAction)

  @@id([tag, file])
}

model files {
  id                      String      @id @map("_id")
  file_path               String
  extension               String
  url_path                String?
  filetype                String?
  metadata                String?
  file_tags               file_tags[]
  links_links_toTofiles   links[]     @relation("links_toTofiles")
  links_links_fromTofiles links[]     @relation("links_fromTofiles")
}

model tags {
  name      String      @id
  file_tags file_tags[]
}

model links {
  link_type               String
  from                    String
  to                      String
  files_links_toTofiles   files  @relation("links_toTofiles", fields: [to], references: [id], onDelete: Cascade, onUpdate: NoAction)
  files_links_fromTofiles files  @relation("links_fromTofiles", fields: [from], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([from, to])
}
